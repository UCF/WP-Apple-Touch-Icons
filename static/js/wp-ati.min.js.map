{"version":3,"sources":["media-upload.js"],"names":["iconMediaUpload","$","uploadFrame","$metaBox","$addLink","find","$delLink","$input","$filename","$preview","on","e","preventDefault","open","wp","media","title","button","text","multiple","attachment","state","get","first","toJSON","removeClass","val","id","filename","addClass","jQuery","document","ready"],"mappings":"AAEA,IAAAA,gBAAA,SAAAC,GACA,IAAAC,OAAAA,EAEAC,EAAAF,EAAA,6BACAG,EAAAD,EAAAE,KAAA,gBACAC,EAAAH,EAAAE,KAAA,gBACAE,EAAAJ,EAAAE,KAAA,gBACAG,EAAAL,EAAAE,KAAA,kBACAI,EAAAN,EAAAE,KAAA,iBAwCAD,EAAAM,GAAA,QAtCA,SAAAC,GACAA,EAAAC,iBAEAV,EACAA,EAAAW,SAIAX,EAAAY,GAAAC,OACAC,MAAA,qDACAC,QACAC,KAAA,gBAEAC,UAAA,KAGAT,GAAA,SAAA,WACA,IAAAU,EAAAlB,EAAAmB,QAAAC,IAAA,aAAAC,QAAAC,SACAf,EAAAgB,YAAA,UACAlB,EAAAmB,IAAAN,EAAAO,IACAnB,EAAAU,KAAAE,EAAAQ,UACAxB,EAAAyB,SAAA,UACAvB,EAAAmB,YAAA,YAGAvB,EAAAW,UAcAP,EAAAI,GAAA,QAXA,SAAAC,GACAA,EAAAC,iBAEAH,EAAAoB,SAAA,UACAzB,EAAAqB,YAAA,UACAnB,EAAAuB,SAAA,UACAtB,EAAAmB,IAAA,IACAlB,EAAAU,KAAA,OAOA,oBAAAY,QACAA,OAAAC,UAAAC,MAAA,SAAA/B,GACAD,gBAAAC","file":"wp-ati.min.js","sourcesContent":["/* global wp */\n\nconst iconMediaUpload = ($) => {\n  let uploadFrame;\n\n  const $metaBox  = $('#wp_ati_page_icon_metabox');\n  const $addLink  = $metaBox.find('.icon-upload');\n  const $delLink  = $metaBox.find('.icon-remove');\n  const $input    = $metaBox.find('#wp_ati_icon');\n  const $filename = $metaBox.find('#icon-filename');\n  const $preview  = $metaBox.find('.icon-preview');\n\n  const upload = (e) => {\n    e.preventDefault();\n\n    if (uploadFrame) {\n      uploadFrame.open();\n      return;\n    }\n\n    uploadFrame = wp.media({\n      title: 'Select the default apple-touch-icon for this page.',\n      button: {\n        text: 'Select Image'\n      },\n      multiple: false\n    });\n\n    uploadFrame.on('select', () => {\n      const attachment = uploadFrame.state().get('selection').first().toJSON();\n      $preview.removeClass('hidden');\n      $input.val(attachment.id);\n      $filename.text(attachment.filename);\n      $addLink.addClass('hidden');\n      $delLink.removeClass('hidden');\n    });\n\n    uploadFrame.open();\n  };\n\n  const removeMedia = (e) => {\n    e.preventDefault();\n\n    $preview.addClass('hidden');\n    $addLink.removeClass('hidden');\n    $delLink.addClass('hidden');\n    $input.val('');\n    $filename.text('');\n  };\n\n  $addLink.on('click', upload);\n  $delLink.on('click', removeMedia);\n};\n\nif (typeof jQuery !== 'undefined') {\n  jQuery(document).ready(($) => {\n    iconMediaUpload($);\n  });\n}\n"]}