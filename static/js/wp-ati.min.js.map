{"version":3,"sources":["media-upload.js"],"names":["iconMediaUpload","$","uploadFrame","$metaBox","$addLink","find","$delLink","$input","$image","$preview","on","e","preventDefault","wp","media","title","button","text","multiple","attachment","state","get","first","toJSON","removeClass","val","id","attr","url","addClass","open","jQuery","document","ready"],"mappings":"AAEA,IAAAA,gBAAA,SAAAC,GACA,IAAAC,EAEAC,EAAAF,EAAA,6BACAG,EAAAD,EAAAE,KAAA,gBACAC,EAAAH,EAAAE,KAAA,gBACAE,EAAAJ,EAAAE,KAAA,gBACAG,EAAAL,EAAAE,KAAA,uBACAI,EAAAN,EAAAE,KAAA,iBAwCAD,EAAAM,GAAA,QAtCA,SAAAC,GACAA,EAAAC,iBAEAV,IAKAA,EAAAW,GAAAC,MAAA,CACAC,MAAA,qDACAC,OAAA,CACAC,KAAA,gBAEAC,UAAA,KAGAR,GAAA,SAAA,WACA,IAAAS,EAAAjB,EAAAkB,QAAAC,IAAA,aAAAC,QAAAC,SACAd,EAAAe,YAAA,UACAjB,EAAAkB,IAAAN,EAAAO,IACAlB,EAAAmB,KAAA,MAAAR,EAAAS,KACAxB,EAAAyB,SAAA,UACAvB,EAAAkB,YAAA,YAlBAtB,EAAA4B,SAmCAxB,EAAAI,GAAA,QAXA,SAAAC,GACAA,EAAAC,iBAEAH,EAAAoB,SAAA,UACAzB,EAAAoB,YAAA,UACAlB,EAAAuB,SAAA,UACAtB,EAAAkB,IAAA,IACAjB,EAAAmB,KAAA,MAAA,OAOA,oBAAAI,QACAA,OAAAC,UAAAC,MAAA,SAAAhC,GACAD,gBAAAC","file":"wp-ati.min.js","sourcesContent":["/* global wp */\n\nconst iconMediaUpload = ($) => {\n  let uploadFrame;\n\n  const $metaBox  = $('#wp_ati_page_icon_metabox');\n  const $addLink  = $metaBox.find('.icon-upload');\n  const $delLink  = $metaBox.find('.icon-remove');\n  const $input    = $metaBox.find('#wp_ati_icon');\n  const $image    = $metaBox.find('#icon-preview-image');\n  const $preview  = $metaBox.find('.icon-preview');\n\n  const upload = (e) => {\n    e.preventDefault();\n\n    if (uploadFrame) {\n      uploadFrame.open();\n      return;\n    }\n\n    uploadFrame = wp.media({\n      title: 'Select the default apple-touch-icon for this page.',\n      button: {\n        text: 'Select Image'\n      },\n      multiple: false\n    });\n\n    uploadFrame.on('select', () => {\n      const attachment = uploadFrame.state().get('selection').first().toJSON();\n      $preview.removeClass('hidden');\n      $input.val(attachment.id);\n      $image.attr('src', attachment.url);\n      $addLink.addClass('hidden');\n      $delLink.removeClass('hidden');\n    });\n\n    uploadFrame.open();\n  };\n\n  const removeMedia = (e) => {\n    e.preventDefault();\n\n    $preview.addClass('hidden');\n    $addLink.removeClass('hidden');\n    $delLink.addClass('hidden');\n    $input.val('');\n    $image.attr('src', '');\n  };\n\n  $addLink.on('click', upload);\n  $delLink.on('click', removeMedia);\n};\n\nif (typeof jQuery !== 'undefined') {\n  jQuery(document).ready(($) => {\n    iconMediaUpload($);\n  });\n}\n"]}